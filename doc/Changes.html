<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Logmonster ChangeLog</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:matt@mattbook.simerson.net" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<!--

<ul>

	<li><a href="#logmonster_changelog">Logmonster ChangeLog</a></li>
	<ul>

		<li><a href="#3_02__">3.02 +</a></li>
		<li><a href="#3_01___feb_2__2007">3.01  - Feb 2, 2007</a></li>
		<li><a href="#3_00rc2___oct_14__2006">3.00rc2 - Oct 14, 2006</a></li>
		<li><a href="#3_00rc1___oct_02__2006__no_public_release_">3.00rc1 - Oct 02, 2006 (no public release)</a></li>
		<ul>

			<li><a href="#massive_code_overhaul">massive code overhaul</a></li>
		</ul>

		<li><a href="#2_77___no_public_release">2.77 - no public release</a></li>
		<li><a href="#2_76___jun_04__2005">2.76 - Jun 04, 2005</a></li>
		<li><a href="#2_75___feb_05__2005">2.75 - Feb 05, 2005</a></li>
		<li><a href="#2_74___nov_26__2004">2.74  - Nov 26, 2004</a></li>
		<li><a href="#2_73___nov_12__2004">2.73  - Nov 12, 2004</a></li>
		<li><a href="#2_72___nov_11__2004">2.72  - Nov 11, 2004</a></li>
		<li><a href="#2_71___oct_22__2004">2.71  - Oct 22, 2004</a></li>
		<li><a href="#2_70___0ct_22__2004">2.70  - 0ct 22, 2004</a></li>
		<li><a href="#2_6_6___jun_16__2004">2.6.6 - Jun 16, 2004</a></li>
		<li><a href="#2_6_5___jun_10__2004">2.6.5 - Jun 10, 2004</a></li>
		<li><a href="#2_6_4___apr_14__2004">2.6.4 - Apr 14, 2004</a></li>
		<li><a href="#2_6_3___mar_28__2004">2.6.3 - Mar 28, 2004</a></li>
		<li><a href="#2_6_2___mar_11__2004">2.6.2 - Mar 11, 2004</a></li>
		<li><a href="#2_6_1___feb_24__2004">2.6.1 - Feb 24, 2004</a></li>
		<li><a href="#2_6___feb_21__2004">2.6   - Feb 21, 2004</a></li>
		<li><a href="#2_5_2___sep_24__2003">2.5.2 - Sep 24, 2003</a></li>
		<li><a href="#2_5___sep_15__2003">2.5   - Sep 15, 2003</a></li>
		<li><a href="#2_4___aug_14__2003">2.4   - Aug 14, 2003</a></li>
		<li><a href="#2_3___jul_10__03">2.3   - Jul 10, 03</a></li>
		<li><a href="#2_2___mar_24__03">2.2   - Mar 24, 03</a></li>
		<li><a href="#2_1_1___mar_18__03">2.1.1 - Mar 18, 03</a></li>
		<li><a href="#2_1___mar_17__03">2.1   - Mar 17, 03</a></li>
		<li><a href="#2_0_3___mar_07__03">2.0.3 - Mar 07, 03</a></li>
		<li><a href="#2_0_2___mar_06__03">2.0.2 - Mar 06, 03</a></li>
		<li><a href="#2_0_1___mar_06__03">2.0.1 - Mar 06, 03</a></li>
		<li><a href="#2_0___mar_04__03">2.0   - Mar 04, 03</a></li>
		<li><a href="#1_4___feb_22__03">1.4   - Feb 22, 03</a></li>
		<li><a href="#1_3___nov_25__02">1.3   - Nov 25, 02</a></li>
		<li><a href="#1_2_1___dec_14__01">1.2.1 - Dec 14, 01</a></li>
		<li><a href="#1_2___jun_28__01">1.2   - Jun 28, 01</a></li>
		<li><a href="#1_1___feb_14__01">1.1   - Feb 14, 01</a></li>
		<li><a href="#1_0___oct_29__00___origin">1.0   - Oct 29, 00 - Origin</a></li>
	</ul>

</ul>

-->


</div>
<!-- INDEX END -->

<p>Apache::Logmonster - Log Processing Utility<br>
Author: Matt Simerson.</p> <p>[ 
   <a href="/internet/www/logmonster.shtml">Install</a> | 
   <a href="/internet/www/logmonster/configure.shtml">Configure</a> | 
   <a href="/internet/www/logmonster/faq.shtml">FAQ</a> | 
   ChangeLog | 
   <a href="/internet/www/logmonster/sample.shtml">Sample</a> ]
 </p><p>
</p>
<hr />
<h1><a name="logmonster_changelog">Logmonster ChangeLog</a></h1>
<p>
</p>
<h2><a name="3_02__">3.02 +</a></h2>
<a href="http://www.tnpi.net/wiki/Logmonster_Changes">http://www.tnpi.net/wiki/Logmonster_Changes</a><p>
</p>
<h2><a name="3_01___feb_2__2007">3.01  - Feb 2, 2007</a></h2>
<p>Added Params::Validate dependency to Makefile.PL</p>
<p>Fixed bug where time offset was being ignored.</p>
<p>Checks more locations for awstats.pl (needs to become a config file settings).</p>
<p>Removed an unnecessary dependency on Mail::Toaster in Utility.pm.</p>
<p>
</p>
<h2><a name="3_00rc2___oct_14__2006">3.00rc2 - Oct 14, 2006</a></h2>
<ul>
<li><strong><a name="updated_usage_examples" class="item">updated usage examples</a></strong>

</li>
<li><strong><a name="added" class="item">added FAQ</a></strong>

</li>
<li><strong><a name="updated_meta_yml_to_new_format" class="item">updated META.yml to new format</a></strong>

</li>
<li><strong><a name="email_report_formatting" class="item">email report formatting</a></strong>

<p>added OUTPUT_AUTOFLUSH b/c printing to *STDERR flushes immediately and mixed print statements did not. Email report is better formatted now.</p>
</li>
<li><strong><a name="added_inc_module_install" class="item">added inc/Module/Install</a></strong>

</li>
<li><strong><a name="added_build_pl" class="item">added Build.PL</a></strong>

</li>
<li><strong><a name="added_examples_daily_email_report_txt" class="item">added examples/daily_email_report.txt</a></strong>

</li>
<li><strong><a name="logmonster_pm" class="item">Logmonster.pm</a></strong>

<p>debug was not being set properly, report formatting tweaks</p>
</li>
<li><strong><a name="utility_pm" class="item">Utility.pm</a></strong>

<p>added _progress sub</p>
</li>
</ul>
<p>
</p>
<h2><a name="3_00rc1___oct_02__2006__no_public_release_">3.00rc1 - Oct 02, 2006 (no public release)</a></h2>
<p>
</p>
<h3><a name="massive_code_overhaul">massive code overhaul</a></h3>
<p>This new version is mostly about code quality and maintainability (not new features). The large chunks of code have been modularized into smaller subroutines and tests have been written to test the functionality of each sub. There are now 102 different tests (was 23) in the test suite. Added t/Test-coverage.pl, t/Logmonster.t, t/pod.t, t/pod-coverage, t/00.load</p>
<p>Nearly all the &quot;working&quot; code has been moved into lib/Apache/Logmonster.pm. Logmonster.pl is now a &quot;shell&quot; consisting of a little bit of code and a lot of documentation.</p>
<p>All the functions are now Object Oriented. Time will tell if that is a A Good Thing[TM] but it makes reading the code and understanding where all the calls are going much, much easier. 
added doc/*</p>
<p>The documentation has been significantly updated, addressing many of the common questions and comments I have received.</p>
<p>The reporting has been overhauled. You still get the same information but by default, if everything is okay it runs entirely silently. A single -v will output status messages that make for a nice birds eye view of your web log traffic. You can add additional -v options for even more verbose reporting.</p>
<p>Interface change: instead of -m for month, -d for day, and -h for hour, you use a -i [hour|day|month] option. The old -mdh options are officially deprecated but will continue to work for the indefinte future.</p>
<p>synced lib/Apache/Logmonster/Perl &amp; Utility with Mail::Toaster 5 versions.</p>
<p>
</p>
<h2><a name="2_77___no_public_release">2.77 - no public release</a></h2>
<ul>
<li><strong><a name="create_daily_userlogs" class="item">create daily userlogs</a></strong>

<p>new feature submitted by Gernot Hueber.</p>
</li>
<li><strong><a name="autogenerate_vhost_stat_dirs" class="item">autogenerate vhost stat dirs</a></strong>

<p>new feature funded by Lewis Bergman: statsdir can be automatically created if it does not exist. Set statsdir_policy = create in logmonster.conf to enable this feature.</p>
</li>
<li><strong><a name="incremental_awstats_config_files" class="item">incremental awstats config files.</a></strong>

<p>New feature by Lewis: Instead of having a full awstats.conf file for each vhost, each vhost has its own file that contains only specific info for that vhost and includes the generic /etc/awstats/awstats.conf file with the &quot;global&quot; settings.</p>
</li>
<li><strong><a name="added_loguser_and_loggroup_to_conf" class="item">added loguser and loggroup to .conf</a></strong>

</li>
</ul>
<p>
</p>
<h2><a name="2_76___jun_04__2005">2.76 - Jun 04, 2005</a></h2>
<dl>
<dt><strong><a name="statsdir_can_now_be_an_absolute_path" class="item">statsdir can now be an absolute path</a></strong></dt>

<dd>
<p>statsdir can now be an absolute path (ex: /var/www/html).  If so, processor output will be stored in statsdir/vhost. Otherwise, it works as it used to and output goes to vhost/statsdir. This is useful if you have a seperate machine (not the web server) that does the processing and that system does not have access to the vhost docroot.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_75___feb_05__2005">2.75 - Feb 05, 2005</a></h2>
<p>* you can now select which stats processor is used for each virtual host. Create a .processor file in the stats dir and place the name of the processor on the first line.</p>
<p>* test to make sure the log file exists before trying to compress it (supresses spurious warnings)</p>
<p>* If vhosts are all in a directory, skip any files that end with ~ (vim) or .bak (user).</p>
<p>* the code that hashed the domain list collected the settings from httpd.conf and stuffed them into a hash with the name of the vhost. This worked great, as long as ServerName was the first declaration in your httpd.conf. I discovered this fails otherwise. Now it stuffs the settings into a hash and then, after all the data is collected, moves the data into a new hash keyed off the vhost servername. The function now works regardless of order in the vhost container.</p>
<p>* If a perl module was missing, the script would fail after attempting to load Mail::Toaster::Perl (which may not exist) Added Apache::Logmonster::Perl to distro</p>
<p>
</p>
<h2><a name="2_74___nov_26__2004">2.74  - Nov 26, 2004</a></h2>
<pre>
 package is now named Apache::Logmonster to fit nicely into a CPAN category
 bundled up for CPAN &amp; freshmeat release
   Makefile.PL
     updated package NAME
     removed MATT::* dependency, added Compress::Zlib dep
   logmonster.pl
     updated package name
   added more example settings to logmonster.conf
   cleaned up pod docs for prettier web page formatting
   added TODO file
   remove MATT::Bundle reference from FAQ</pre>
<p>
</p>
<h2><a name="2_73___nov_12__2004">2.73  - Nov 12, 2004</a></h2>
<pre>
  updated lib/Logmonster/Utility to latest
  fixed get_the_date bug in Utility
  added many more tests for Utility
  fixed a bug in my fileparse call (File::Basename)</pre>
<p>
</p>
<h2><a name="2_72___nov_11__2004">2.72  - Nov 11, 2004</a></h2>
<pre>
  Removed MATT::Utility dependency
  added lib/logmonster/Utility (logmonster::Utility)
  removed Exporter
  updates for use with logmonster::Utility
  replaced StripLastDirFromPath with File::Basename</pre>
<p>
</p>
<h2><a name="2_71___oct_22__2004">2.71  - Oct 22, 2004</a></h2>
<pre>
  Raymond Dijkxhoorn suggested not sorting the files if 
    there is only one host. Shucks, that's a reasonable enough 
    thing to do, for those of you with only one web server. ;-)
  Logmonster will now dutifully skip sorting logs if only
    one hostname is configured in logmonster.conf</pre>
<p>
</p>
<h2><a name="2_70___0ct_22__2004">2.70  - 0ct 22, 2004</a></h2>
<pre>
  allow for ServerName to have a :80 style suffix
  added verbose (-v) flag.
  fixed up reporting so quiet mode is really quiet
     unless there are errors
  normal output is prettier
  debugging output is much prettier
  apache config file parsing is now much more versatile
     if you have a folder full of files for vhosts, you can
     have multiple vhosts within a file now
  misc internal changes for efficiency
  prototyped all subroutines
  added additional comments here and there
  added test for FileHandle</pre>
<p>
</p>
<h2><a name="2_6_6___jun_16__2004">2.6.6 - Jun 16, 2004</a></h2>
<pre>
  Added inline documentation to a few of the subs
  Modified SortVhostLogs so that it uses much less memory
     by writing to the log file as we sort instead of building
     an array and then writing the array contents to the file
     in GetDomainList, I forgot to add domains without aliases
     to %domains 
  GetServerName: made the regexp search more reliable (no
     known problems but the potential existed).</pre>
<p>
</p>
<h2><a name="2_6_5___jun_10__2004">2.6.5 - Jun 10, 2004</a></h2>
<pre>
 Switched date parsing regexp from / / to /\s+/ in 
   SortVhostLogs per Earl Ruby (eruby@switchmanagement.com)
   for compatibility with Apache::Registry</pre>
<p>
</p>
<h2><a name="2_6_4___apr_14__2004">2.6.4 - Apr 14, 2004</a></h2>
<pre>
  Added regexp notes
  Added additional debugging
  Check for files locally before trying to compress them</pre>
<p>
</p>
<h2><a name="2_6_3___mar_28__2004">2.6.3 - Mar 28, 2004</a></h2>
<pre>
  Updated regexp to support numeric vhosts
  Updated logmonster.pl pod documentation
  Updated Makefile.PL, added README, FAQ files
  Added BSD copyright</pre>
<p>
</p>
<h2><a name="2_6_2___mar_11__2004">2.6.2 - Mar 11, 2004</a></h2>
<pre>
  Corrected a typo in the logmonster.pl config file.</pre>
<p>
</p>
<h2><a name="2_6_1___feb_24__2004">2.6.1 - Feb 24, 2004</a></h2>
<pre>
  Fixed problem where paths with caps weren't detected 
   (search string was lower cased)</pre>
<p>
</p>
<h2><a name="2_6___feb_21__2004">2.6   - Feb 21, 2004</a></h2>
<pre>
  Updated documentation and web site. More informative.</pre>
<p>
</p>
<h2><a name="2_5_2___sep_24__2003">2.5.2 - Sep 24, 2003</a></h2>
<pre>
  Added a strip leading spaces function to GetVhostsFromFile
  Adjusted so FindTheBin will find awstats in its default
    location (/usr/local/www/cgi-bin/awstats.pl)</pre>
<p>
</p>
<h2><a name="2_5___sep_15__2003">2.5   - Sep 15, 2003</a></h2>
<pre>
  Fixed a problem with HitsPerVHost not getting written
  Fixed a mis-feature where running logmonster -r was 
    clobbering the active log processing dir. Oops.
  Fixed a couple problems related to interaction between
    script and MATT::Utility
  Made quite a few failures more graceful. This later proved
    to be only beneficial from a theoretical standpoint
    as it didn't solve the problem I was tracking down.</pre>
<p>
</p>
<h2><a name="2_4___aug_14__2003">2.4   - Aug 14, 2003</a></h2>
<pre>
  Updated FetchLogFiles so that you don't need to ssh to localhost
  Updated URLs from matt.simerson.net to tnpi.biz
  Moved configuration from script to logmonster.conf
  Added Changes to the CVS depot
  Added support for AWStats log processor
  Added lots of documentation to logmonster.conf</pre>
<p>
</p>
<h2><a name="2_3___jul_10__03">2.3   - Jul 10, 03</a></h2>
<pre>
  Added pod documentation.  
  Cleaned up SysCmd calls and now SysCmd calls use MATT::Utility</pre>
<p>
</p>
<h2><a name="2_2___mar_24__03">2.2   - Mar 24, 03</a></h2>
<pre>
  Moved many subs out of script into modules</pre>
<p>
</p>
<h2><a name="2_1_1___mar_18__03">2.1.1 - Mar 18, 03</a></h2>
<pre>
  Report hit counts (-r designed to be used with SNMP and RRDutil)</pre>
<p>
</p>
<h2><a name="2_1___mar_17__03">2.1   - Mar 17, 03</a></h2>
<pre>
  Moved code out of FetchLogFiles to GetTheLogDir for reuse
  Writes counters to $logdir/HitsPerVhost.txt
  Writes activity log to $logdir/Logmonster.txt
  Renamed $logdir to $logbase</pre>
<p>
</p>
<h2><a name="2_0_3___mar_07__03">2.0.3 - Mar 07, 03</a></h2>
<pre>
  Moved FAQ and Changelog to web site.
  Created web page for logmonster.
  Added support for http-analyze. It should work but I
    haven't used http-analzye in about 5 years so I 
    might be forgetting something.</pre>
<p>
</p>
<h2><a name="2_0_2___mar_06__03">2.0.2 - Mar 06, 03</a></h2>
<pre>
  Added the httpd.conf parsing stuff. Now works with a vhost
    directory or parses out of your httpd.conf - cool :)</pre>
<p>
</p>
<h2><a name="2_0_1___mar_06__03">2.0.1 - Mar 06, 03</a></h2>
<pre>
  Moved vhost log pre-processer checks out of FeedTheMachine
    into CheckStatsDir. Run it before SortVhostLogs so we 
    skip sorting any logs that we aren't going to store.
  Count up invalid lines in log files and report them instead
    of dying when we encounter them.
  Print out prettier logs.</pre>
<p>
</p>
<h2><a name="2_0___mar_04__03">2.0   - Mar 04, 03</a></h2>
<pre>
  An entire re-write
  Logic is much cleaner now and way more efficient
  Pulls most settings out of apache config files
  Reporting is much better :)
  Added -b (process archived logs) feature
  Added -h &amp; -m (hourly &amp; monthly processing)
  Added -n (dry run) so you can preview what it'll do
  Now clean enough that I'll make it publicly available</pre>
<p>
</p>
<h2><a name="1_4___feb_22__03">1.4   - Feb 22, 03</a></h2>
<pre>
  Major code cleanups
  Reworked fetch_the_files
  Added system_command
  Added FindTheBin</pre>
<p>
</p>
<h2><a name="1_3___nov_25__02">1.3   - Nov 25, 02</a></h2>
<pre>
  Added use strict (forced code cleanup)
  Added getopt::std instead of custom parser
  Moved $quiet to $opt_q, $debug to $opt_v</pre>
<p>
</p>
<h2><a name="1_2_1___dec_14__01">1.2.1 - Dec 14, 01</a></h2>
<pre>
  Made it work with matt.simerson.net</pre>
<p>
</p>
<h2><a name="1_2___jun_28__01">1.2   - Jun 28, 01</a></h2>
<pre>
  Cleaned up the code, added debug flag, expanded logic
    so v1.2 can replicate 1.0 &amp; 1.1 behaviour with options</pre>
<p>
</p>
<h2><a name="1_1___feb_14__01">1.1   - Feb 14, 01</a></h2>
<pre>
  Added support for multiple domains</pre>
<p>
</p>
<h2><a name="1_0___oct_29__00___origin">1.0   - Oct 29, 00 - Origin</a></h2>

</body>

</html>
